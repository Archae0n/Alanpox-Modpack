@resolution_weight_fuckingloathed = -5
@resolution_weight_hated = 3
@resolution_weight_disliked = 4
@resolution_weight_unpopular = 5
@resolution_weight_normal = 6
@resolution_weight_popular = 6.5
@resolution_weight_loved = 7

@resolution_cost_t1 = 100
@resolution_cost_t2 = 150
@resolution_cost_t3 = 200
@resolution_cost_t4 = 250
@resolution_cost_t5 = 300
@resolution_cost_denounce = 25

@resolution_flag_timer = 360

#Capital
resolution_cmartlet_building = {
	icon = "GFX_resolution_cmartlet"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	level = 1

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cmartlet_building = 1
		}
	}

	modifier = {
	}
	

	effect = {
		custom_tooltip = resolution_cmartlet_building_effects
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cmartlet days = @resolution_flag_timer }
			set_global_flag = cmbu_noreturn
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_cmartlet_building"
				is_active_resolution = "resolution_cmartlet_army"
				is_active_resolution = "resolution_cmartlet_casusb"
				is_active_resolution = "resolution_cmartlet_crisis"
				is_active_resolution = "resolution_cmartlet_unique"
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_zenith
	}

	active = {
		is_galactic_custodian = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked
		
		modifier = {
			#WIP
		}
	}
}

#Army
resolution_cmartlet_army = {
	icon = "GFX_resolution_cmartlet"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	target = no

	level = 2

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cmartlet_building = 2
			resolution_cmartlet_army = 1
		}
	}

	modifier = {
	}
	

	effect = {
		custom_tooltip = resolution_cmartlet_army_effects
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_zenith
	}

	allow = {
		is_active_resolution = "resolution_cmartlet_building"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_disliked
	}
}

#Casus Belli
resolution_cmartlet_casusb = {
	icon = "GFX_resolution_cmartlet"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	level = 3

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cmartlet_building = 3
			resolution_cmartlet_army = 1
			resolution_cmartlet_casusb = 1
		}
	}

	modifier = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_zenith
	}
	

	effect = {
		custom_tooltip = resolution_cmartlet_casusb_effects
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_cmartlet_army"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_hated
	}
}

#Crisis damage
resolution_cmartlet_crisis = {
	icon = "GFX_resolution_cmartlet"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}
	target = no

	level = 4

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cmartlet_building = 4
			resolution_cmartlet_army = 1
			resolution_cmartlet_casusb = 1
			resolution_cmartlet_crisis = 1
		}
	}

	modifier = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_zenith
	}
	

	effect = {
		#custom_tooltip = resolution_finalwarning
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_cmartlet_casusb"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_normal
	}
}

#Extra
resolution_cmartlet_unique = {
	icon = "GFX_resolution_cmartlet"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no

	level = 5

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cmartlet_building = 5
			resolution_cmartlet_army = 1
			resolution_cmartlet_casusb = 1
			resolution_cmartlet_crisis = 1
			resolution_cmartlet_unique = 1
		}
	}

	modifier = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_zenith
	}
	

	effect = {
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cmartlet days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_cmartlet_crisis"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_fuckingloathed
	}
}

#Capital
resolution_cbananas_building = {
	icon = "GFX_resolution_cbananas"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	level = 1

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cbananas_building = 1
		}
	}

	modifier = {
	}
	

	effect = {
		custom_tooltip = resolution_cbananas_building_effects
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cbananas days = @resolution_flag_timer }
			set_global_flag = cmbu_noreturn
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_cbananas_building"
				is_active_resolution = "resolution_cbananas_army"
				is_active_resolution = "resolution_cbananas_casusb"
				is_active_resolution = "resolution_cbananas_crisis"
				is_active_resolution = "resolution_cbananas_unique"
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_banana
	}

	active = {
		is_galactic_custodian = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked
		
		modifier = {
			#WIP
		}
	}
}

#Army
resolution_cbananas_army = {
	icon = "GFX_resolution_cbananas"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	target = no

	level = 2

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cbananas_building = 2
			resolution_cbananas_army = 1
		}
	}

	modifier = {
	}
	

	effect = {
		#custom_tooltip = resolution_cbananas_army_effect
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_banana
	}

	allow = {
		is_active_resolution = "resolution_cbananas_building"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_disliked
	}
}

#Casus Belli
resolution_cbananas_casusb = {
	icon = "GFX_resolution_cbananas"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	level = 3

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cbananas_building = 3
			resolution_cbananas_army = 1
			resolution_cbananas_casusb = 1
		}
	}

	modifier = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_banana
	}
	

	effect = {
		#custom_tooltip = resolution_chre_reform_effect
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_cbananas_army"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_hated
	}
}

#Crisis damage
resolution_cbananas_crisis = {
	icon = "GFX_resolution_cbananas"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}
	target = no

	level = 4

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cbananas_building = 4
			resolution_cbananas_army = 1
			resolution_cbananas_casusb = 1
			resolution_cbananas_crisis = 1
		}
	}

	modifier = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_banana
	}
	

	effect = {
		#custom_tooltip = resolution_finalwarning
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_cbananas_casusb"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_normal
	}
}

#Extra
resolution_cbananas_unique = {
	icon = "GFX_resolution_cbananas"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no

	level = 5

	triggered_modifier = {
		potential = {
			is_galactic_custodian = yes
		}
		modifier = {
			resolution_cbananas_building = 5
			resolution_cbananas_army = 1
			resolution_cbananas_casusb = 1
			resolution_cbananas_crisis = 1
			resolution_cbananas_unique = 1
		}
	}

	modifier = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = resolution_rdxproclaim_banana
	}
	

	effect = {
		custom_tooltip = resolution_cbananas_unique_effects
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cbananas days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	allow = {
		is_active_resolution = "resolution_cbananas_crisis"
	}

	active = {
		is_galactic_custodian = yes
	}

	#The Galaxy is against you
	ai_weight = {
		base = @resolution_weight_fuckingloathed
	}
}